# 청주시 금연구역 점검 지도 시스템

청주시 금연구역 점검을 위한 인터랙티브 웹 매핑 도구입니다. 데이터 관리, 경로 최적화, 내비게이션 연동 등 점검 업무에 필요한 모든 기능을 제공합니다.

## 🚀 주요 기능

### 📊 데이터 관리
- **Excel/CSV 파일 업로드** - 점검 대상지 데이터 일괄 업로드
- **고급 설정** - 시트 선택, 좌표 열 매핑 지원
- **실시간 통계** - 총 개수, 표시, 누락, 제외 항목 실시간 집계

### 🔍 필터링 & 검색
- **실시간 검색** - 시설명, 주소, 읍면동, 군집, 카테고리 통합 검색
- **스마트 필터링** - 군집별, 읍면동별, 카테고리별 칩 기반 필터
- **자동 연동** - 검색어 입력시 해당 필터 칩 자동 활성화
- **조건별 표시** - 좌표 없는 데이터, 미점검 항목만 표시 옵션

### 🗺️ 지도 & 시각화
- **다양한 마커 스타일** - 원형, 사각형, 말풍선 형태 선택
- **마커 클러스터링** - 대용량 데이터 성능 최적화
- **실시간 라벨** - 시설명 표시 옵션
- **다크모드** - 시간대별 최적 가시성

### 🎯 경로 최적화
- **3가지 알고리즘**
  - 최근접 이웃 (Nearest Neighbor)
  - TSP 최적화 (2-opt improvement)
  - 클러스터 기반 (Cluster-based routing)
- **시작/끝 고정** - 출발지/도착지 고정 경로 생성
- **일일 방문지 한도** - 업무량에 맞춘 경로 분할
- **실시간 통계** - 총 거리, 예상 시간, 방문지 수

### 📍 고급 기능
- **A/B 경로 측정** - 지도상 두 지점간 직선거리 측정
- **경로 외 마커 숨김** - 계산된 경로에 집중하기 위한 시각적 정리
- **선택목록 관리** - 드래그 가능한 패널로 선택 항목 관리
- **필터결과 일괄 추가** - 현재 필터 결과를 선택목록에 한번에 추가

### 🚗 내비게이션 연동
- **다중 앱 지원** - 카카오맵, 네이버지도, 구글지도 연동
- **원클릭 경로안내** - 각 지점에서 바로 길찾기 실행

### 💾 데이터 내보내기
- **Excel 내보내기** - 선택목록 또는 전체 데이터 XLSX 파일로 저장
- **PDF 지도** - 현재 지도 상태를 PDF로 출력 (고화질 옵션)
- **PNG 이미지** - 지도 스크린샷 저장

### ⌨️ 접근성 & 편의성
- **키보드 단축키** - Ctrl+A(전체선택), Ctrl+D(선택해제), F(지도맞춤), Esc(팝업닫기)
- **툴팁 지원** - 모든 버튼에 기능 설명 툴팁
- **온라인/오프라인 상태** - 네트워크 연결 상태 실시간 표시
- **반응형 디자인** - 데스크톱, 태블릿 환경 최적화

## 📁 파일 구조

```
├── NEW_WORLD_MAP_CLUSTRO_NAV_v14.1.html    # 🔥 최신 완전기능 버전 (권장)
├── NEW_WORLD_MAP_CLUSTRO_NAV.html          # v14.0 기본 버전  
├── NEW_WORLD_MAP_with_navigation.html      # v12.1 네비게이션 버전
├── NEW_WORLD_MAP v14.1 기능 점검 및 개선 보고서.pdf  # 기능 비교 분석 보고서
└── 기타 개발 버전들...
```

## 🚀 빠른 시작

1. **파일 다운로드**
   ```bash
   git clone https://github.com/sledgerock80-hue/cheongju-nonsmoking-zone-map.git
   ```

2. **브라우저에서 실행**
   - `NEW_WORLD_MAP_CLUSTRO_NAV_v14.1.html` 파일을 더블클릭하여 브라우저에서 실행
   - 별도 설치 과정 불필요 (모든 라이브러리 CDN 로드)

3. **데이터 업로드**
   - 상단 "📁 엑셀/CSV 파일 업로드" 버튼 클릭
   - 청주시 점검 대상지 Excel 파일 선택
   - 자동으로 데이터 매핑 및 지도 표시

## 📋 지원 데이터 형식

Excel 파일의 다음 열들이 자동 인식됩니다:
- **B열**: 점검일 (선택사항)
- **C열**: 기본 좌표 정보
- **E열**: 카테고리 (업종)
- **G열**: 경도 (Longitude)
- **H열**: 위도 (Latitude)  
- **J열**: 시설명 (필수)
- **R열**: 주소 (선택사항)
- **S열**: 군집 번호
- **U열**: 읍면동 정보

> 💡 **팁**: 고급 설정에서 다른 열 매핑도 지정 가능합니다.

## 🆚 버전 비교

| 기능 | v12.1 | v14.0 | **v14.1** ✨ |
|------|-------|--------|-------------|
| 데이터 업로드 | ✅ | ✅ | ✅ |
| 실시간 검색 | ✅ | ✅ | ✅ **개선됨** |
| 필터 칩 연동 | ✅ | ❌ | ✅ **복구됨** |
| 마커 클러스터링 | ❌ | 🔄 UI만 | ✅ **완전구현** |
| A/B 경로 측정 | ✅ | ❌ | ✅ **복구됨** |
| 경로 외 마커 숨김 | ✅ | ❌ | ✅ **복구됨** |
| 경로 시작/끝 고정 | ✅ | ❌ | ✅ **복구됨** |
| 필터 토글 동기화 | ✅ | ❌ | ✅ **수정됨** |
| 모던 UI 디자인 | ❌ | ✅ | ✅ |
| 반응형 지원 | ❌ | ✅ | ✅ |

## 🔧 기술 스택

- **Frontend**: HTML5, CSS3 (CSS Grid & Flexbox), Vanilla JavaScript (ES6+)
- **지도 라이브러리**: Leaflet.js v1.9.4, MarkerCluster v1.4.1
- **데이터 처리**: SheetJS (XLSX) v0.18.5
- **PDF 생성**: jsPDF v2.5.1, html2canvas v1.4.1
- **지도 타일**: VWorld 국토정보플랫폼
- **디자인**: 청주시 CI 컬러, Noto Sans KR 폰트

## 📈 성능 최적화

- **마커 클러스터링**: 1000개 이상 대용량 데이터 처리 최적화
- **가상화 스크롤**: 선택목록 테이블 성능 개선
- **지연 로딩**: 필요시에만 라이브러리 로드
- **메모리 관리**: 마커 생성/제거시 메모리 누수 방지

## 🤝 기여 방법

1. Fork 프로젝트
2. Feature 브랜치 생성 (`git checkout -b feature/amazing-feature`)
3. 변경사항 커밋 (`git commit -m 'Add amazing feature'`)
4. 브랜치에 Push (`git push origin feature/amazing-feature`)
5. Pull Request 생성

## 📞 지원 및 문의

- **이슈 신고**: [GitHub Issues](https://github.com/sledgerock80-hue/cheongju-nonsmoking-zone-map/issues)
- **기능 제안**: Pull Request 또는 Issue로 제안해주세요

## 📄 라이센스

이 프로젝트는 MIT 라이센스 하에 배포됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.

## 🏆 특별 감사

- **청주시청**: 금연구역 점검 업무 개선을 위한 요구사항 제공
- **VWorld**: 고품질 지도 타일 서비스 제공
- **Leaflet 커뮤니티**: 오픈소스 지도 라이브러리

---

> 💡 **최신 버전 사용을 권장합니다**: `NEW_WORLD_MAP_CLUSTRO_NAV_v14.1.html`은 모든 기능이 완전히 구현된 안정 버전입니다.

🤖 **AI 협업으로 개발됨**: 이 프로젝트는 [Claude Code](https://claude.ai/code)의 도움으로 개발되었습니다.